<!-- Editor -- if doc$ is available -->
<ng-container *ngIf="docId$ | async as docId else list">
  <venite-ldf-editor [docId]="docId"></venite-ldf-editor>
</ng-container>

<!-- List of documents -->
<ng-template #list>
  <ion-header [translucent]="true">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button></ion-back-button>
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-title><h1>{{ 'editor.title' | translate}}</h1></ion-title>
      <ion-buttons slot="end">
        <venite-create-document-button (newDoc)="joinDocument($event)"></venite-create-document-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
  <ion-content #list [fullscreen]="true">
    <ion-header collapse="condense">
      <ion-toolbar>
        <ion-title size="large"><h1>{{ 'editor.title' | translate }}</h1></ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-searchbar (ionChange)="search$.next($event.detail.value)"></ion-searchbar>

    <ion-list *ngIf="myDocs$ | async as docs else nodocs">
      <ion-list-header><h2>{{ 'editor.mydocs' | translate }}</h2></ion-list-header>
      <ion-item *ngFor="let doc of docs; trackBy: trackIdAndDocBy">
        <ion-label [routerLink]="['.', doc.id]">
          <h3>{{ doc.data?.label || doc.data?.slug }}</h3>
          <h4>{{ doc.data?.type }} | {{ doc.data?.language }} | {{ doc.data?.version }}</h4>
        </ion-label>
        <ion-buttons slot="end">
          <ion-button (click)="delete(doc.id, doc.data?.label || doc.data?.slug)">
            <ion-icon slot="icon-only" name="trash"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-item>
    </ion-list>
    <ng-template #nodocs><p>{{ 'editor.loading' | translate }}</p></ng-template>
  </ion-content>
</ng-template>